/*
 Copyright (c)2006-2018 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license   GNU General Public License version 3, or later
*/
if("undefined"==typeof akeeba)var akeeba={};
var AkeebaStepper=function(k){this.options={holder:"#stepper-holder",loading:"#stepper-loading",pane:"#stepper-progress-pane",content:"#stepper-progress-content",steps:"#stepper-steps",status:"#stepper-status",step:"#stepper-step",substep:"#stepper-substep",percentage:"#stepper-percentage",timer:"#response-timer",useIframe:!1,domainUrl:"view=Alice&task=domains",pollingUrl:"view=Alice&task=ajax",onBeforeStart:function(a){},onBeforeStep:function(a,b){},onComplete:function(a){}};this.options=array_merge(this.options,
k||{});var b=this,d={cache:!1,data:{},dataType:"text",success:function(a){a=/###(.*?)###/.exec(a);var c=JSON.parse(a[1]);b.renderBars(c.Domain);document.querySelector(b.options.percentage+" div.akeeba-progress-fill").style.width=c.Progress+"%";document.querySelector(b.options.step).textContent=c.Step;document.querySelector(b.options.substep).textContent=c.Substep;1==c.HasRun?b.complete(c):setTimeout(function(){b.step(c)},10)}},l=function(){akeeba.Ajax.ajax("index.php?option=com_akeeba&tmpl=component&"+
b.options.domainUrl,{cache:!1,dataType:"text",beforeSend:function(){document.querySelector(b.options.loading).style.display="block"},success:function(a){a=/###(.*?)###/.exec(a);b.domains=JSON.parse(a[1]);document.querySelector(b.options.loading).style.display="none";document.querySelector(b.options.pane).style.display="block";b.continueAfterLoad()}})},g=function(){var a=0,c=setInterval(function(){a++;document.querySelector(b.options.timer+" div.text").textContent=Joomla.JText._("COM_AKEEBA_BACKUP_TEXT_LASTRESPONSE").replace("%s",
a.toFixed(0))},1E3),e=document.querySelector(b.options.timer);akeeba.System.data.set(e,"akeebatimer",c)},h=function(){var a=document.querySelector(b.options.timer),a=akeeba.System.data.get(a,"akeebatimer");clearInterval(a);document.querySelector(b.options.timer+" div.text").textContent=Joomla.JText._("COM_AKEEBA_BACKUP_TEXT_LASTRESPONSE").replace("%s","0")};this.init=function(){l()};this.continueAfterLoad=function(){this.renderBars();g();this.start()};this.renderBars=function(a){void 0==a&&(a="");
var c="akeeba-label--green",e="akeeba-label--grey";document.querySelector(b.options.steps).innerHTML="";for(var d=0;d<this.domains.length;d++){var e=this.domains[d],f=document.createElement("div");f.className="";f.textContent=e[1];akeeba.System.data.set(f,"domain",e[0]);document.querySelector(b.options.steps).appendChild(f);e[0]==a?(c="akeeba-label--grey",e="akeeba-label--teal"):e=c;f.className=e}};this.start=function(){this.options.onBeforeStart(d);d.data.ajax="start";akeeba.Ajax.ajax("index.php?option=com_akeeba&tmpl=component&"+
this.options.pollingUrl,d)};this.step=function(a){this.options.onBeforeStep(d,a);h();g();d.data.ajax="step";akeeba.Ajax.ajax("index.php?option=com_akeeba&tmpl=component&"+this.options.pollingUrl,d)};this.complete=function(a){h();this.options.onComplete(a)}}; //# sourceMappingURL=Stepper.min.map
